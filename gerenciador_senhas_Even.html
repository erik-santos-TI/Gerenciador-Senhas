<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerenciador de Senhas 🔐</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        body {
            background-color: #b3e0ff; /* azul bebê */
            color: #000000;
        }
        .hidden-password {
            color: #888;
            font-style: italic;
        }
    </style>
</head>
<body class="container mt-5">
    <h1 class="mb-4">Gerenciador de Senhas 🔐</h1>
    <p id="msg">Credenciais Armazenadas</p>
    <div class="input-group mb-3">
        <input type="text" id="search-login" class="form-control" placeholder="Pesquisar site ou sistema">
        <div class="input-group-append">
            <span class="input-group-text">🔍</span>
        </div>
    </div>
    <ul id="password-list" class="list-group mb-3"></ul>
    <div class="input-group mb-3">
        <input type="text" id="new-site" class="form-control" placeholder="Digite o site ou sistema" maxlength="35">
        <input type="text" id="new-login" class="form-control" placeholder="Digite o login" maxlength="35">
        <input type="text" id="new-password" class="form-control" placeholder="Digite a senha" maxlength="35">
        <div class="input-group-append">
            <button class="btn btn-secondary" type="button" onclick="addCredential()">Adicionar Credencial</button>
        </div>
    </div>
    <button class="btn btn-danger mr-2" onclick="clearPasswords()">Apagar Tudo</button>

    <script>
        document.addEventListener("DOMContentLoaded", loadPasswords);

        function addCredential() {
            const siteInput = document.getElementById('new-site');
            const loginInput = document.getElementById('new-login');
            const passwordInput = document.getElementById('new-password');
            const passwordList = document.getElementById('password-list');
            const siteText = siteInput.value.trim();
            const loginText = loginInput.value.trim();
            const passwordText = passwordInput.value.trim();

            if (siteText !== '' && loginText !== '' && passwordText !== '') {
                const newCredential = document.createElement('li');
                newCredential.textContent = `Site/Sistema: ${siteText}, Login: ${loginText}, Senha: [Oculto]`;
                newCredential.classList.add('list-group-item', 'hidden-password');
                newCredential.dataset.site = siteText;
                newCredential.dataset.login = loginText;
                newCredential.dataset.password = passwordText;
                newCredential.onclick = togglePasswordVisibility;
                passwordList.appendChild(newCredential);

                saveCredential(siteText, loginText, passwordText);
                siteInput.value = '';
                loginInput.value = '';
                passwordInput.value = '';
            }
        }

        function togglePasswordVisibility() {
            if (this.classList.contains('hidden-password')) {
                this.textContent = `Site/Sistema: ${this.dataset.site}, Login: ${this.dataset.login}, Senha: ${this.dataset.password}`;
                this.classList.remove('hidden-password');
            } else {
                this.textContent = `Site/Sistema: ${this.dataset.site}, Login: ${this.dataset.login}, Senha: [Oculto]`;
                this.classList.add('hidden-password');
            }
        }

        function clearPasswords() {
            if (confirm("Tem certeza de que deseja apagar todas as senhas?")) {
                const passwordList = document.getElementById('password-list');
                passwordList.innerHTML = '';
                localStorage.removeItem('credentials');
            }
        }

        function saveCredential(site, login, password) {
            let credentials = JSON.parse(localStorage.getItem('credentials')) || [];
            credentials.push({ site, login, password });
            localStorage.setItem('credentials', JSON.stringify(credentials));
        }

        function loadPasswords() {
            const credentials = JSON.parse(localStorage.getItem('credentials')) || [];
            const passwordList = document.getElementById('password-list');
            credentials.forEach(({ site, login, password }) => {
                const newCredential = document.createElement('li');
                newCredential.textContent = `Site/Sistema: ${site}, Login: ${login}, Senha: [Oculto]`;
                newCredential.classList.add('list-group-item', 'hidden-password');
                newCredential.dataset.site = site;
                newCredential.dataset.login = login;
                newCredential.dataset.password = password;
                newCredential.onclick = togglePasswordVisibility;
                passwordList.appendChild(newCredential);
            });
        }

        document.getElementById('search-login').addEventListener('input', filterCredentials);

        function filterCredentials() {
            const searchValue = document.getElementById('search-login').value.toLowerCase();
            const credentials = document.querySelectorAll('#password-list li');
            
            credentials.forEach(credential => {
                const site = credential.dataset.site.toLowerCase();
                if (site.includes(searchValue)) {
                    credential.style.display = '';
                } else {
                    credential.style.display = 'none';
                }
            });
        }
    </script>
</body>
</html>
